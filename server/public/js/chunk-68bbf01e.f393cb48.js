(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-68bbf01e"],{"0d65":function(t,e,s){},1360:function(t,e,s){"use strict";s("cee4a")},"1a34":function(t,e,s){t.exports=s.p+"img/calendar.e3c7d004.svg"},"459b":function(t,e,s){},"5d27":function(t,e,s){t.exports=s.p+"img/restaurant.64e7e302.svg"},"6b11":function(t,e,s){"use strict";s("0d65")},"6d7f":function(t,e,s){"use strict";var a=s("2fa3"),r=function(){return localStorage.getItem("token")};e["a"]={getReservations:function(){return a["b"].get("/user/reservations",{headers:{Authorization:"Bearer ".concat(r())}})},getReservation:function(t){return a["b"].get("/user/reservations/".concat(t),{headers:{Authorization:"Bearer ".concat(r())}})},addReservation:function(t){return a["b"].post("/user/reservations",t,{headers:{Authorization:"Bearer ".concat(r())}})}}},b855:function(t,e,s){t.exports=s.p+"img/profile.0f180f0a.svg"},cee4a:function(t,e,s){},e0f8:function(t,e,s){t.exports=s.p+"img/clock.8f8a9c12.svg"},e4bb:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"history-page"},[s("Navbar"),s("div",{staticClass:"history-container"},[s("div",{staticClass:"title"},[t._v("用餐紀錄")]),s("div",{staticClass:"history-wrapper"},[s("div",{staticClass:"tab-container"},[s("div",{staticClass:"tab ",class:{active:t.tabFuture},on:{click:function(e){t.tabFuture=!0}}},[t._v(" 即將前往 "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.tabFuture,expression:"tabFuture"}],staticClass:"active-line"})]),s("div",{staticClass:"tab",class:{active:!t.tabFuture},on:{click:function(e){t.tabFuture=!1}}},[t._v(" 過去紀錄 "),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.tabFuture,expression:"!tabFuture"}],staticClass:"active-line"})]),s("div",{staticClass:"divider"})]),s("div",{ref:"reservation-container",staticClass:"reservation-container"},[t.tabFuture?s("FutureReservation",{attrs:{reservations:t.futureReservation}}):t._e(),t.tabFuture?t._e():s("PastReservation",{attrs:{reservations:t.pastReservation}})],1)])]),s("div",{ref:"footer"},[s("Footer")],1)],1)},r=[],i=(s("4de4"),s("96cf"),s("1da1")),n=s("5530"),c=s("2fa3"),o=s("2f62"),d=s("6d7f"),u=s("d178"),l=s("fd2d"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"future-reservation"},[t.restaurants.length<1?a("div",{staticClass:"more-container"},[a("div",{staticClass:"more-title"},[t._v("還沒想好要吃什麼？")]),a("div",{staticClass:"illustration-wrapper"},[a("div",{staticClass:"cover"},[a("div",{staticClass:"button",on:{click:function(e){return t.$router.push("/map")}}},[t._v("現在就去找餐廳")])])])]):t._e(),t.restaurants.length>0?a("div",t._l(Math.ceil(t.restaurants.length/t.cardPerDeck),(function(e){return a("div",{key:"card-deck-"+e,staticClass:"card-deck"},[t._l(t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck),(function(e,r){return a("div",{key:e.id,staticClass:"booking-card real-card",class:{"last-card":3===r},on:{click:function(s){return t.$router.push("/users/history/"+e.id)}}},[a("div",{staticClass:"picture-wrapper"},[a("div",{staticClass:"picture",style:"background: url("+e.Restaurant_picture+") no-repeat center / cover"})]),a("div",{staticClass:"header"},[a("img",{staticClass:"icon restaurant",attrs:{src:s("5d27")}}),a("div",{staticClass:"name"},[t._v(t._s(e.Restaurant_name))])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"info"},[a("div",{staticClass:"item-wrapper"},[a("img",{staticClass:"icon profile",attrs:{src:s("b855")}}),a("div",{staticClass:"number"},[t._v(t._s(e.partySize_adult)+"大"),e.partySize_kids>0?a("span",[t._v("小")]):t._e()])]),a("div",{staticClass:"item-wrapper"},[a("img",{staticClass:"icon time",attrs:{src:s("1a34")}}),a("div",{staticClass:"date"},[t._v(t._s(t._f("bookingDateFormat")(new Date(new Date(e.date.slice(0,10)).toDateString()))))])]),a("div",{staticClass:"item-wrapper"},[a("img",{staticClass:"icon time",attrs:{src:s("e0f8")}}),a("div",{staticClass:"time"},[t._v(t._s(e.time.slice(0,5)))])])])])})),t.cardPerDeck>1&&t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck).length<t.cardPerDeck?a("div",{staticClass:"booking-card"}):t._e(),t.cardPerDeck>2&&t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck).length<t.cardPerDeck?a("div",{staticClass:"booking-card"}):t._e()],2)})),0):t._e()])},f=[],h={data:function(){return{windowWidth:window.innerWidth,cardPerDeck:1,restaurants:[]}},props:{reservations:{type:Array}},created:function(){this.restaurants=this.reservations},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth})),this.defineCardDeck()},watch:{windowWidth:function(){this.defineCardDeck()},reservations:function(){this.restaurants=this.reservations}},methods:{defineCardDeck:function(){this.windowWidth<768?this.cardPerDeck=1:this.windowWidth<992?this.cardPerDeck=2:this.cardPerDeck=3}}},p=h,w=(s("1360"),s("2877")),k=Object(w["a"])(p,v,f,!1,null,null,null),C=k.exports,m=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"past-reservation"},[t.restaurants.length<1?a("div",{staticClass:"more-container"},[a("div",{staticClass:"more-title"},[t._v("過去沒有訂位的紀錄")]),a("div",{staticClass:"illustration-wrapper"},[a("div",{staticClass:"cover"},[a("div",{staticClass:"button",on:{click:function(e){return t.$router.push("/map")}}},[t._v("現在就去找餐廳")])])])]):t._e(),t.restaurants.length>0?a("div",t._l(Math.ceil(t.restaurants.length/t.cardPerDeck),(function(e){return a("div",{key:"card-deck-"+e,staticClass:"card-deck"},[t._l(t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck),(function(e,r){return a("div",{key:e.id,staticClass:"booking-card",class:{"last-card":3===r},on:{click:function(s){return t.$router.push("/users/history/"+e.id)}}},[a("div",{staticClass:"picture-wrapper"},[a("div",{staticClass:"picture",style:"background: url("+e.Restaurant_picture+") no-repeat center / cover"})]),a("div",{staticClass:"header"},[a("img",{staticClass:"icon restaurant",attrs:{src:s("5d27")}}),a("div",{staticClass:"name"},[t._v(t._s(e.Restaurant_name))])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"info"},[a("div",{staticClass:"item-wrapper"},[a("img",{staticClass:"icon profile",attrs:{src:s("b855")}}),a("div",{staticClass:"number"},[t._v(t._s(e.partySize_adult)+"大"),e.partySize_kids>0?a("span",[t._v("小")]):t._e()])]),a("div",{staticClass:"item-wrapper"},[a("img",{staticClass:"icon time",attrs:{src:s("1a34")}}),a("div",{staticClass:"date"},[t._v(t._s(t._f("bookingDateFormat")(new Date(new Date(e.date.slice(0,10)).toDateString()))))])]),a("div",{staticClass:"item-wrapper"},[a("img",{staticClass:"icon time",attrs:{src:s("e0f8")}}),a("div",{staticClass:"time"},[t._v(t._s(e.time.slice(0,5)))])])])])})),t.cardPerDeck>1&&t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck).length<t.cardPerDeck?a("div",{staticClass:"booking-card",staticStyle:{"box-shadow":"none",border:"none"}}):t._e(),t.cardPerDeck>2&&t.restaurants.slice((e-1)*t.cardPerDeck,e*t.cardPerDeck).length+1<t.cardPerDeck?a("div",{staticClass:"booking-card",staticStyle:{"box-shadow":"none",border:"none"}}):t._e()],2)})),0):t._e()])},b=[],_={data:function(){return{windowWidth:window.innerWidth,cardPerDeck:1,restaurants:[]}},props:{reservations:{type:Array}},created:function(){this.restaurants=this.reservations},mounted:function(){var t=this;window.addEventListener("resize",(function(){t.windowWidth=window.innerWidth})),this.defineCardDeck()},watch:{windowWidth:function(){this.defineCardDeck()},reservations:function(){this.restaurants=this.reservations}},methods:{defineCardDeck:function(){this.windowWidth<768?this.cardPerDeck=1:this.windowWidth<992?this.cardPerDeck=2:this.cardPerDeck=3}}},g=_,D=(s("f4f6"),Object(w["a"])(g,m,b,!1,null,null,null)),P=D.exports,y={data:function(){return{tabFuture:!0,reservations:[],futureReservation:[],pastReservation:[]}},components:{Navbar:u["a"],Footer:l["default"],FutureReservation:C,PastReservation:P},created:function(){},mounted:function(){this.fetchReservations()},computed:Object(n["a"])({},Object(o["b"])(["currentUser","isAuthenticated"])),methods:{fetchReservations:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=t.$loading.show({opacity:1,isFullPage:!0}),e.prev=1,e.next=4,d["a"].getReservations();case 4:a=e.sent,r=a.data,t.reservations=r.reservations,t.futureReservation=t.reservations.filter((function(t){var e=new Date(t.date);return e.setHours(e.getHours()+8),e>Date.now()})),t.pastReservation=t.reservations.filter((function(t){var e=new Date(t.date);return e.setHours(e.getHours()+8),e<=Date.now()})),s.hide(),e.next=17;break;case 12:e.prev=12,e.t0=e["catch"](1),s.hide(),console.log(e.t0),c["a"].fire({icon:"error",title:"目前無法取得餐廳，請稍候"});case 17:case"end":return e.stop()}}),e,null,[[1,12]])})))()}}},R=y,F=(s("6b11"),Object(w["a"])(R,a,r,!1,null,null,null));e["default"]=F.exports},f4f6:function(t,e,s){"use strict";s("459b")}}]);
//# sourceMappingURL=chunk-68bbf01e.f393cb48.js.map